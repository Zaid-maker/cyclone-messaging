(this.webpackJsonpcyclonemessaging=this.webpackJsonpcyclonemessaging||[]).push([[0],{117:function(e,t,c){},119:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(18),r=c.n(a),i=c(7),l=c(122),o=c(127),j=c(123),d=c(128),u=c(1);function b(e){var t=e.onIdSubmit,c=Object(n.useRef)();return Object(u.jsx)(l.a,{className:"login",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-sm-8 d-flex align-items-center",children:Object(u.jsx)("img",{src:"https://cdn.discordapp.com/attachments/795010536365752320/799761776824418354/bg4.png",alt:"",style:{maxHeight:"100vh",maxWidth:"100%"}})}),Object(u.jsxs)("div",{className:"col-sm-4 d-flex flex-column justify-content-center",children:[Object(u.jsxs)("div",{className:"pl-0",children:[Object(u.jsx)("h1",{className:"text-white mb-2",children:"Chat App"}),Object(u.jsxs)("p",{className:"text-blue mb-0",children:[Object(u.jsx)("i",{className:"material-icons",style:{fontSize:"18px"},children:"check"})," ","for Instant Messaging"]}),Object(u.jsxs)("p",{className:"text-blue mb-0",children:[Object(u.jsx)("i",{className:"material-icons",style:{fontSize:"18px"},children:"check"})," ","No Signup Required"]}),Object(u.jsxs)("p",{className:"text-blue",children:[Object(u.jsx)("i",{className:"material-icons",style:{fontSize:"18px"},children:"check"})," ","Multiple Group Chats with no limit on members"]})]}),Object(u.jsxs)(o.a,{onSubmit:function(e){e.preventDefault(),t(c.current.value)},className:"w-100 mt-2",children:[Object(u.jsxs)(o.a.Group,{children:[Object(u.jsx)(o.a.Label,{className:"text-white",children:"Enter Your Id"}),Object(u.jsx)(o.a.Control,{type:"text",ref:c,required:!0,placeholder:"Enter ID"})]}),Object(u.jsx)(j.a,{type:"submit",className:"mr-2 button",children:"Login"}),Object(u.jsx)(j.a,{onClick:function(){t(Object(d.a)())},className:"button",children:"Create A New Id"})]})]})]})})}function m(e,t){var c="whatsapp-clone-"+e,s=Object(n.useState)((function(){var e=localStorage.getItem(c);return null!=e?"undefined"===e?null:JSON.parse(e):"function"===typeof t?t():t})),a=Object(i.a)(s,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){localStorage.setItem(c,JSON.stringify(r))}),[c,r]),[r,l]}var h=c(125),x=c(130),O=c(129),f=c(126),v=c(131),p=c(24),g=c(21),N=s.a.createContext();function y(){return Object(n.useContext)(N)}function C(e){var t=e.children,c=m("contacts",[]),n=Object(i.a)(c,2),s=n[0],a=n[1];return Object(u.jsx)(N.Provider,{value:{contacts:s,createContact:function(e,t){a((function(c){return[].concat(Object(g.a)(c),[{id:e,name:t}])}))}},children:t})}var S=c(70),w=c.n(S),I=s.a.createContext();function k(e){var t=e.id,c=e.children,s=Object(n.useState)(),a=Object(i.a)(s,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){var e=w()("https://cyclone-messaging-server.herokuapp.com",{query:{id:t}});return l(e),function(){return e.close()}}),[t]),Object(u.jsx)(I.Provider,{value:r,children:c})}var M=s.a.createContext();function L(){return Object(n.useContext)(M)}function E(e){var t=e.id,c=e.children,s=m("conversations",[]),a=Object(i.a)(s,2),r=a[0],l=a[1],o=Object(n.useState)(0),j=Object(i.a)(o,2),d=j[0],b=j[1],h=y().contacts,x=Object(n.useContext)(I);var O=Object(n.useCallback)((function(e){var t=e.recipients,c=e.text,n=e.sender;l((function(e){var s=!1,a={sender:n,text:c},r=e.map((function(e){return c=e.recipients,n=t,c.length===n.length&&(c.sort(),n.sort(),c.every((function(e,t){return e===n[t]})))?(s=!0,Object(p.a)(Object(p.a)({},e),{},{messages:[].concat(Object(g.a)(e.messages),[a])})):e;var c,n}));return s?r:[].concat(Object(g.a)(e),[{recipients:t,messages:[a]}])}))}),[l]);Object(n.useEffect)((function(){if(null!=x)return x.on("receive-message",O),function(){return x.off("receive-message")}}),[x,O]);var f=r.map((function(e,c){var n=e.recipients.map((function(e){var t=h.find((function(t){return t.id===e})),c=t&&t.name||e;return{id:e,name:c}})),s=e.messages.map((function(e){var c=h.find((function(t){return t.id===e.sender})),n=c&&c.name||e.sender,s=t===e.sender;return Object(p.a)(Object(p.a)({},e),{},{senderName:n,fromMe:s})})),a=c===d;return Object(p.a)(Object(p.a)({},e),{},{messages:s,recipients:n,selected:a})})),v={conversations:f,selectedConversation:f[d],sendMessage:function(e,c){x.emit("send-message",{recipients:e,text:c}),O({recipients:e,text:c,sender:t})},selectConversationIndex:b,createConversation:function(e){l((function(t){return[].concat(Object(g.a)(t),[{recipients:e,messages:[]}])}))}};return Object(u.jsx)(M.Provider,{value:v,children:c})}function D(){var e=L(),t=e.conversations,c=e.selectConversationIndex;return Object(u.jsx)(v.a,{variant:"flush",children:t.map((function(e,t){return Object(u.jsx)(v.a.Item,{action:!0,onClick:function(){return c(t)},active:e.selected,children:e.recipients.map((function(e){return e.name})).join(", ")},t)}))})}function z(){var e=y().contacts;return Object(u.jsx)(v.a,{variant:"flush",children:e.map((function(e){return Object(u.jsx)(v.a.Item,{children:e.name},e.id)}))})}function F(e){var t=e.closeModal,c=Object(n.useRef)(),s=Object(n.useRef)(),a=y().createContact;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(f.a.Header,{closeButton:!0,children:"Create Contact"}),Object(u.jsx)(f.a.Body,{children:Object(u.jsxs)(o.a,{onSubmit:function(e){e.preventDefault(),c.current.value&&s.current.value?(a(c.current.value,s.current.value),t()):console.log("add values")},children:[Object(u.jsxs)(o.a.Group,{children:[Object(u.jsx)(o.a.Label,{children:"Id"}),Object(u.jsx)(o.a.Control,{type:"text",ref:c,placeholder:"enter id of your friend",required:!0})]}),Object(u.jsxs)(o.a.Group,{children:[Object(u.jsx)(o.a.Label,{children:"Name"}),Object(u.jsx)(o.a.Control,{type:"text",ref:s,placeholder:"enter name",required:!0})]}),Object(u.jsx)("div",{className:"text-center mt-4",children:Object(u.jsx)(j.a,{type:"submit",className:"button w-100",children:"Create"})})]})})]})}var G=c(35);function q(e){var t=e.closeModal,c=Object(n.useState)([]),s=Object(i.a)(c,2),a=s[0],r=s[1],l=y().contacts,d=L().createConversation;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(f.a.Header,{closeButton:!0,children:"Create Chat"}),Object(u.jsx)(f.a.Body,{children:Object(u.jsxs)(o.a,{onSubmit:function(e){e.preventDefault(),0!==a.length?(d(a),t()):G.b.error("Add atleast one contact")},children:[l.map((function(e){return Object(u.jsx)(o.a.Group,{controlId:e.id,children:Object(u.jsx)(o.a.Check,{type:"checkbox",value:a.includes(e.id),label:e.name,onChange:function(){return t=e.id,void r((function(e){return e.includes(t)?e.filter((function(e){return t!==e})):[].concat(Object(g.a)(e),[t])}));var t}})},e.id)})),Object(u.jsx)("div",{className:"text-center mt-4",children:Object(u.jsx)(j.a,{type:"submit",className:"button w-100",children:"Create"})})]})})]})}c(113);var P="conversations",A="contacts";function B(){var e=Object(n.useState)(P),t=Object(i.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(i.a)(a,2),l=r[0],o=r[1],j=c===P,d=function(){o(!1)};return Object(u.jsxs)("div",{className:"sidebar",children:[Object(u.jsxs)(x.a.Container,{activeKey:c,onSelect:s,children:[Object(u.jsxs)(O.a,{variant:"tabs",children:[Object(u.jsx)(O.a.Item,{children:Object(u.jsx)(O.a.Link,{eventKey:P,children:"Chats"})}),Object(u.jsx)(O.a.Item,{children:Object(u.jsx)(O.a.Link,{eventKey:A,children:"Contacts"})})]}),Object(u.jsxs)(x.a.Content,{children:[Object(u.jsx)("div",{className:"top pb-3",children:Object(u.jsxs)("h3",{className:"text-light mb-0 pl-3",children:[j?"Chat":"Contact",Object(u.jsx)("span",{className:"material-icons pl-2",onClick:function(){return o(!0)},style:{cursor:"pointer",color:"#369ee1"},children:"\ue148"})]})}),Object(u.jsx)(x.a.Pane,{eventKey:P,children:Object(u.jsx)(D,{})}),Object(u.jsx)(x.a.Pane,{eventKey:A,children:Object(u.jsx)(z,{})})]})]}),Object(u.jsx)(f.a,{show:l,onHide:d,children:j?Object(u.jsx)(q,{closeModal:d}):Object(u.jsx)(F,{closeModal:d})})]})}var K=c(124),R=c(72),Y=c.n(R),H=c(73),J=c.n(H);function T(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(i.a)(a,2),l=r[0],d=r[1],b=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=function(e){b.current&&!b.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[b]);var m=Object(n.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]),h=L(),x=h.sendMessage,O=h.selectedConversation;return Object(u.jsxs)("div",{className:"chat-text-container",children:[Object(u.jsx)("div",{className:"chat-text",children:O.messages.map((function(e,t){var c=O.messages.length-1===t;return Object(u.jsxs)("div",{ref:c?m:null,className:"text".concat(e.fromMe?"-sameUser":"-diffUser"),children:[Object(u.jsx)("div",{className:"message",children:J.a.emojify(e.text)}),Object(u.jsx)("div",{className:"text-muted small ".concat(e.fromMe?"text-right":""),children:e.fromMe?"You":e.senderName})]},t)}))}),Object(u.jsxs)(o.a,{onSubmit:function(e){e.preventDefault(),x(O.recipients.map((function(e){return e.id})),c),s("")},className:"bottom",children:[l&&Object(u.jsx)("div",{ref:b,children:Object(u.jsx)(Y.a,{onEmojiClick:function(e,t){s((function(e){return e.concat(t.emoji)}))}})}),Object(u.jsx)(o.a.Group,{className:"m-2",children:Object(u.jsxs)(K.a,{children:[Object(u.jsx)(o.a.Control,{type:"text",required:!0,placeholder:"enter your message",value:c,onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("button",{type:"button",className:"material-icons button btn-primary",onClick:function(){return d(!l)},children:"insert_emoticon"}),Object(u.jsx)(K.a.Append,{children:Object(u.jsx)(j.a,{type:"submit",className:"button ml-1",children:"Send"})})]})})]})]})}var U=c(74),W=function(e){var t=e.id;return Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)(G.a,{}),Object(u.jsxs)("nav",{className:"navbar navbar-expand-sm bg-light mb-0 header d-flex justify-content-between",style:{height:"8vh"},children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h5",{className:"text-light d-inline",children:"Chat App"}),Object(u.jsx)("button",{className:"btn-primary button ml-4","data-toggle":"modal","data-target":"#myModal",children:"Logout"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"text-light",children:Object(u.jsx)("b",{children:"Your Id:"})})," ",Object(u.jsxs)("span",{className:"text-light pr-2",value:t,children:[Object(u.jsxs)("span",{className:"pr-3",children:[" ",t," "]}),Object(u.jsx)(U.CopyToClipboard,{text:t,children:Object(u.jsx)("i",{className:"material-icons",style:{fontSize:"16px",cursor:"pointer"},onClick:function(){return G.b.dark("Your Id is copied to Clipboard. Now you can share it with your friends !!")},children:"\ue14d"})})]})]})]}),Object(u.jsx)(V,{logout:function(e){e.preventDefault(),localStorage.removeItem("whatsapp-clone-id"),localStorage.removeItem("whatsapp-clone-contacts"),localStorage.removeItem("whatsapp-clone-conversations"),window.location.reload(!1)}})]})},V=function(e){var t=e.logout;return Object(u.jsx)(s.a.Fragment,{children:Object(u.jsx)("div",{className:"modal fade",id:"myModal",children:Object(u.jsx)("div",{className:"modal-dialog",children:Object(u.jsxs)("div",{className:"modal-content",children:[Object(u.jsxs)("div",{className:"modal-header",children:[Object(u.jsx)("h4",{className:"modal-title",children:"Logging Out !!!"}),Object(u.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"})]}),Object(u.jsx)("div",{className:"modal-body border border-0",children:"If you log out all your saved contacts and conversations will be deleted. We do not store any of your chats. There is no way to retrieve it."}),Object(u.jsx)("div",{className:"modal-footer border border-0",children:Object(u.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(e){return t(e)},children:"Logout and Delete"})})]})})})})},_=function(){return Object(u.jsx)(s.a.Fragment,{children:Object(u.jsx)("nav",{className:"navbar navbar-expand-sm bg-light mb-0 footer",style:{height:"7vh"},children:Object(u.jsx)("div",{className:"text-center text-light w-100",children:Object(u.jsx)("p",{className:"mb-0",children:"Proudly developed by DevMirza Development."})})})})},Q=function(){return Object(u.jsx)(s.a.Fragment,{children:Object(u.jsxs)("div",{className:"d-flex justify-content-center align-items-center w-100 text-white flex-column",style:{height:"70vh"},children:[Object(u.jsxs)("h1",{children:["Your chatbox is empty",Object(u.jsx)("span",{role:"img","aria-label":"",children:"\ud83e\udd7a\ud83e\udd7a\ud83e\udd7a"})]}),Object(u.jsxs)("div",{className:"mt-4 ml-5 text-blue w-50",children:[Object(u.jsxs)("p",{className:"mb-1",children:[Object(u.jsx)("i",{className:"material-icons pr-2",style:{fontSize:"18px"},children:"check"}),"Share your ",Object(u.jsx)("b",{children:"id"})," with your friends"]}),Object(u.jsxs)("p",{className:"mb-1",children:[Object(u.jsx)("i",{className:"material-icons pr-2",style:{fontSize:"18px"},children:"check"}),"Get their ",Object(u.jsx)("b",{children:"id"})," and create contacts"]}),Object(u.jsxs)("p",{className:"mb-1",children:[Object(u.jsx)("i",{className:"material-icons pr-2",style:{fontSize:"18px"},children:"check"}),"Now you can either create private or group chat rooms by selecting your Friends name"]})]})]})})};function X(e){var t=e.id,c=L().selectedConversation;return Object(u.jsxs)(s.a.Fragment,{children:[Object(u.jsx)(W,{id:t}),Object(u.jsx)("div",{className:"container-fluid",style:{height:"85vh"},children:Object(u.jsxs)(h.a,{children:[Object(u.jsx)("div",{className:"col-sm-3",children:Object(u.jsx)(B,{id:t})}),Object(u.jsxs)("div",{className:"col-sm-9",children:[!c&&Object(u.jsx)(Q,{}),c&&Object(u.jsx)(T,{})]})]})}),Object(u.jsx)(_,{})]})}c(117);var Z=function(){var e=m("id"),t=Object(i.a)(e,2),c=t[0],n=t[1];return c?Object(u.jsx)(k,{id:c,children:Object(u.jsx)(C,{children:Object(u.jsx)(E,{id:c,children:Object(u.jsx)(X,{id:c})})})}):Object(u.jsx)(b,{onIdSubmit:n})};c(118);r.a.render(Object(u.jsx)(Z,{}),document.getElementById("root"))}},[[119,1,2]]]);
//# sourceMappingURL=main.83f01d0b.chunk.js.map